import{u as M,r as a,j as e,G as l,T as y,M as D,B as h,C as v,Z as z,S as I}from"./index-Dp2XNDKK.js";import{T as P}from"./TextField-DUMBoiOr.js";import{T as w,d as E,b as T,c as s,a as R}from"./TableRow-qJTSE9r_.js";import{f as A,P as B}from"./Pagination-CPcFk552.js";function G(){const{api:x,user:i}=M(),[p,j]=a.useState([]),[u,g]=a.useState(!0),[c,m]=a.useState(1),[f]=a.useState(20),[o,b]=a.useState({total:0,total_pages:1}),[n,C]=a.useState("");return a.useEffect(()=>{let t=!1;async function d(){try{g(!0);const r={page:c,limit:f};i?.is_admin&&n&&(r.merchant_id=n);const _=await x.get("/api/dashboard/deposits",{params:r});if(t)return;j(_.data?.deposits||[]);const S=_.data?.pagination||{};b({total:S.total||0,total_pages:S.total_pages||1})}catch(r){console.error(r),t||j([])}finally{t||g(!1)}}return d(),()=>{t=!0}},[x,c,f,n,i?.is_admin]),e.jsxs(l,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[e.jsx(l,{size:12,children:e.jsx(y,{variant:"h5",children:"Deposits"})}),i?.is_admin&&e.jsx(l,{size:12,children:e.jsx(D,{content:!1,children:e.jsx(h,{sx:{p:2},children:e.jsx(P,{size:"small",label:"Merchant ID",value:n,onChange:t=>{C(t.target.value),m(1)},sx:{minWidth:160}})})})}),e.jsx(l,{size:12,children:e.jsx(D,{title:`Deposits (${o.total} total)`,content:!1,children:u?e.jsx(h,{sx:{p:4,textAlign:"center"},children:e.jsx(v,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(w,{size:"small",sx:{minWidth:640},children:[e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(s,{children:"ID"}),e.jsx(s,{children:"Deposit ID"}),e.jsx(s,{children:"Merchant Ref"}),i?.is_admin&&e.jsx(s,{children:"Merchant ID"}),e.jsx(s,{children:"Status"}),e.jsx(s,{align:"right",children:"Expected (USDT)"}),e.jsx(s,{align:"right",children:"Received (USDT)"}),e.jsx(s,{children:"Created"})]})}),e.jsx(R,{children:p.map(t=>e.jsxs(T,{hover:!0,children:[e.jsx(s,{children:t.id}),e.jsx(s,{children:t.deposit_id}),e.jsx(s,{children:t.merchant_deposit_id||"—"}),i?.is_admin&&e.jsx(s,{children:t.merchant_id}),e.jsx(s,{children:e.jsx(z,{label:t.status||"pending",size:"small",color:t.status==="completed"?"success":t.status==="failed"?"error":"default",variant:"outlined"})}),e.jsx(s,{align:"right",children:Number(t.expected_amount||0).toLocaleString()}),e.jsx(s,{align:"right",children:Number(t.received_amount||0).toLocaleString()}),e.jsx(s,{children:t.created_at?A(new Date(t.created_at),"MMM d, yyyy HH:mm"):"—"})]},t.id))})]}),p.length===0&&!u&&e.jsx(h,{sx:{p:4,textAlign:"center"},children:e.jsx(y,{color:"text.secondary",children:"No deposits found."})}),o.total_pages>1&&e.jsx(I,{direction:"row",justifyContent:"center",sx:{py:2},children:e.jsx(B,{count:o.total_pages,page:c,onChange:(t,d)=>m(d),color:"primary"})})]})})})]})}export{G as default};
//# sourceMappingURL=index-DHPbEq_z.js.map
